!function(t){var n={};function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(r,o,function(n){return t[n]}.bind(null,o));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=3)}([function(t,n){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,n){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,n){(function(n){t.exports=n}).call(this,{})},function(t,n,e){"use strict";var r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var e in t)Object.hasOwnProperty.call(t,e)&&(n[e]=t[e]);return n.default=t,n};Object.defineProperty(n,"__esModule",{value:!0}),e(4);const o=e(5),i=r(e(6));console.log("STARTING RAINBOW SORTING BENCHMARK");const a=100,s=new ImageData(a,a),c=function(){const t={JS:document.getElementById("section-js-rendering"),WASM:document.getElementById("section-wasm-rendering"),CONTROLS:document.getElementById("section-controls")};return{JS:{SECTION:t.JS,BTN_RESET:t.JS.getElementsByClassName("btn-reset")[0],BTN_SORT:t.JS.getElementsByClassName("btn-sort")[0],UI_RENDER_TIME:t.JS.getElementsByClassName("code-render-time")[0],UI_SORT_TIME:t.JS.getElementsByClassName("code-sort-time")[0],CANVAS:t.JS.getElementsByTagName("canvas")[0]},WASM:{SECTION:t.WASM,BTN_RESET:t.WASM.getElementsByClassName("btn-reset")[0],BTN_SORT:t.WASM.getElementsByClassName("btn-sort")[0],UI_RENDER_TIME:t.WASM.getElementsByClassName("code-render-time")[0],UI_SORT_TIME:t.WASM.getElementsByClassName("code-sort-time")[0],CANVAS:t.WASM.getElementsByTagName("canvas")[0]},CONTROLS:{IN_RND_SEED:t.CONTROLS.getElementsByClassName("in-random-seed")[0],BTN_RANDOMIZE:t.CONTROLS.getElementsByClassName("btn-randomize")[0]}}}();let u="hello";function l(){const t=new i.alea(u),n=s.width,e=s.height,r=s.data;for(let i=0;i<e;i++)for(let e=0;e<n;e++){const a=i*n*4+4*e,s=o.hslToRgb(t(),1,.5);r[a]=s[0],r[a+1]=s[1],r[a+2]=s[2],r[a+3]=255}}function f(t){const n=new o.Timeline("Reset JS Canvas");t.CTX.putImageData(s,0,0),n.mark("Reset JS Canvas"),n.end(),c.JS.UI_RENDER_TIME.innerHTML=`${Math.round(n.RUN_DURATION)} ms`}function d(t){const n=new o.Timeline("Reset WASM Canvas");t.CTX.putImageData(s,0,0),n.mark("Reset WASM Canvas"),n.end(),c.JS.UI_RENDER_TIME.innerHTML=`${Math.round(n.RUN_DURATION)} ms`}!async function(){const t=function(){const t=c.JS.CANVAS.getContext("2d");return c.JS.CANVAS.width=a,c.JS.CANVAS.height=a,c.JS.CANVAS.style.transform=`scale(${500/a})`,t.fillRect(0,0,a,a),{CANVAS:c.JS.CANVAS,CTX:t}}(),n=function(){const t=c.WASM.CANVAS.getContext("2d");return c.WASM.CANVAS.width=a,c.WASM.CANVAS.height=a,c.WASM.CANVAS.style.transform=`scale(${500/a})`,t.fillRect(0,0,a,a),{CANVAS:c.WASM.CANVAS,CTX:t}}(),e=await async function(t,n){let e=void 0;n||(n={env:{abort:()=>console.log("Abort!")}});return e=await(async()=>{const e=await fetch(t).then(t=>t.arrayBuffer());return WebAssembly.instantiate(e,n)})()}("./assembly/index.wasm");c.CONTROLS.BTN_RANDOMIZE.addEventListener("click",()=>{l(),f(t),d(n)}),c.CONTROLS.IN_RND_SEED.addEventListener("change",t=>{console.log("Got seed: "+t.target.value),t.target.value?u=t.target.value:alert("Seed must exist")}),c.JS.BTN_RESET.addEventListener("click",()=>{f(t)}),c.JS.BTN_SORT.addEventListener("click",()=>{!function(t){const n=new o.Timeline("Sort JS Canvas");console.log("Sorting JS Canvas...");const e=t.CTX.getImageData(0,0,a,a);if(0===e.width||0===e.height)throw new Error("Failed to get IMAGE DATA. Try running demo hosted on your machine");(function(t){const n=t.width,e=t.height,r=t.data;let i=!1;do{i=!1;for(let t=0;t<e;t++)for(let e=0;e<n;e++){const n=a(e,t),r=a(e+1,t);if(n&&r){const a=o.rgbToHsl(n[0],n[1],n[2])[0];o.rgbToHsl(r[0],r[1],r[2])[0]>a&&(s(e,t,r),s(e+1,t,n),i=!0)}}}while(i);function a(t,e){const o=e*n*4+4*t;return o>r.length-1?null:[r[o+0],r[o+1],r[o+2]]}function s(t,e,o){const i=e*n*4+4*t;if(i>r.length-1)return null;r[i+0]=o[0],r[i+1]=o[1],r[i+2]=o[2],r[i+3]=255}})(e),n.mark("Sort JS Canvas"),t.CTX.putImageData(e,0,0),n.mark("Render image"),n.end(),c.JS.UI_SORT_TIME.innerHTML=`${Math.round(n.RUN_DURATION)} ms`,c.JS.UI_RENDER_TIME.innerHTML=`${Math.round(n.get("Render image"))} ms`}(t)}),c.WASM.BTN_RESET.addEventListener("click",()=>{d(n)}),c.WASM.BTN_SORT.addEventListener("click",()=>{!function(t,n){const e=new o.Timeline("Reset WASM Canvas");console.log("Sorting WASM Canvas...");const r=n.CTX.getImageData(0,0,a,a),i=a*a*4,s=t.instance.exports.__alloc(i+1),u=new Uint8ClampedArray(t.instance.exports.memory.buffer,s,i);e.mark("Allocate memory in wasm"),u.set(r.data),e.mark("Transfer image to wasm"),t.instance.exports.sortImgData(s,a),e.mark("Sort image inside wasm");const l=new ImageData(u,a,a);e.mark("Transfer the sorted image back to js"),n.CTX.putImageData(l,0,0),e.mark("Render image"),e.end(!0),c.WASM.UI_SORT_TIME.innerHTML=`${Math.round(e.RUN_DURATION)} ms`,c.WASM.UI_RENDER_TIME.innerHTML=`${Math.round(e.get("Render image"))} ms`}(e,n)}),l(),f(t),d(n)}()},function(t,n,e){},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.Timeline=class{constructor(t){this.NAME=t,this.TIMES=new Map,this.START_TIME=window.performance.now(),this.PREVIOUS_TIME=window.performance.now(),this.RUN_DURATION=0}mark(t){this.TIMES.set(t,Math.round(100*(window.performance.now()-this.PREVIOUS_TIME))/100),this.RUN_DURATION+=window.performance.now()-this.PREVIOUS_TIME,this.PREVIOUS_TIME=window.performance.now()}get(t){const n=this.TIMES.get(t);return null!==n?n:"null"}setLogThereshold(t){this.LOG_TO_CONSOLE_THRESHOLD=t}end(t=!1){this.END_TIME=Math.round(100*window.performance.now())/100,this.RUN_DURATION=this.END_TIME-this.START_TIME,this.TIMES.set("TOTAL",this.RUN_DURATION),t?console.table(this.TIMES):this.LOG_TO_CONSOLE_THRESHOLD&&this.RUN_DURATION>this.LOG_TO_CONSOLE_THRESHOLD&&console.table(this.TIMES)}},n.hexToRGB=function(t){"#"===t[0]&&(t=t.slice(1));var n=parseInt(t,16);return[n>>16&255,n>>8&255,255&n]},n.rgbToHex=function(t,n,e){return"#"+((1<<24)+(t<<16)+(n<<8)+e).toString(16).slice(1)},n.rgbToHsl=function(t,n,e){t/=255,n/=255,e/=255;var r,o,i=Math.max(t,n,e),a=Math.min(t,n,e),s=(i+a)/2;if(i==a)r=o=0;else{var c=i-a;switch(o=s>.5?c/(2-i-a):c/(i+a),i){case t:r=(n-e)/c+(n<e?6:0);break;case n:r=(e-t)/c+2;break;case e:r=(t-n)/c+4}r/=6}return[r,o,s]},n.hslToRgb=function(t,n,e){var r,o,i;if(0==n)r=o=i=e;else{function a(t,n,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?t+6*(n-t)*e:e<.5?n:e<2/3?t+(n-t)*(2/3-e)*6:t}var s=e<.5?e*(1+n):e+n-e*n,c=2*e-s;r=a(c,s,t+1/3),o=a(c,s,t),i=a(c,s,t-1/3)}return[255*r,255*o,255*i]},n.randomRGB=function(){return[Math.floor(255*Math.random()),Math.floor(255*Math.random()),Math.floor(255*Math.random())]},n.setTimeoutPromise=function(t){return new Promise((n,e)=>{setTimeout(()=>n(),t)})};const r=new class{constructor(){this.Log=new Map,this.CONSOLE_EL=document.getElementById("console")}log(t,n){this.Log.set(t,n)}time(t,n){this.Log.set(t+" ms",Math.round(n)),n>100&&console.log(t+" : "+n)}printLogToConsole(){const t=this.CONSOLE_EL.getElementsByClassName("log").item(0);if(t){t.innerHTML="";for(let n of this.Log){let e=n[1];if(!e)continue;const r=document.createElement("div"),o=document.createElement("span"),i=document.createElement("span");o.innerHTML=n[0].toString(),i.innerHTML=e.toString(),r.append(o,i),r.className="entry",t.append(r)}}}};n.LOGGER=r},function(t,n,e){var r=e(7),o=e(8),i=e(9),a=e(10),s=e(11),c=e(12),u=e(13);u.alea=r,u.xor128=o,u.xorwow=i,u.xorshift7=a,u.xor4096=s,u.tychei=c,t.exports=u},function(t,n,e){(function(t){var r;!function(t,o,i){function a(t){var n,e=this,r=(n=4022871197,function(t){t=String(t);for(var e=0;e<t.length;e++){var r=.02519603282416938*(n+=t.charCodeAt(e));r-=n=r>>>0,n=(r*=n)>>>0,n+=4294967296*(r-=n)}return 2.3283064365386963e-10*(n>>>0)});e.next=function(){var t=2091639*e.s0+2.3283064365386963e-10*e.c;return e.s0=e.s1,e.s1=e.s2,e.s2=t-(e.c=0|t)},e.c=1,e.s0=r(" "),e.s1=r(" "),e.s2=r(" "),e.s0-=r(t),e.s0<0&&(e.s0+=1),e.s1-=r(t),e.s1<0&&(e.s1+=1),e.s2-=r(t),e.s2<0&&(e.s2+=1),r=null}function s(t,n){return n.c=t.c,n.s0=t.s0,n.s1=t.s1,n.s2=t.s2,n}function c(t,n){var e=new a(t),r=n&&n.state,o=e.next;return o.int32=function(){return 4294967296*e.next()|0},o.double=function(){return o()+11102230246251565e-32*(2097152*o()|0)},o.quick=o,r&&("object"==typeof r&&s(r,e),o.state=function(){return s(e,{})}),o}o&&o.exports?o.exports=c:e(0)&&e(2)?void 0===(r=function(){return c}.call(n,e,n,o))||(o.exports=r):this.alea=c}(0,t,e(0))}).call(this,e(1)(t))},function(t,n,e){(function(t){var r;!function(t,o,i){function a(t){var n=this,e="";n.x=0,n.y=0,n.z=0,n.w=0,n.next=function(){var t=n.x^n.x<<11;return n.x=n.y,n.y=n.z,n.z=n.w,n.w^=n.w>>>19^t^t>>>8},t===(0|t)?n.x=t:e+=t;for(var r=0;r<e.length+64;r++)n.x^=0|e.charCodeAt(r),n.next()}function s(t,n){return n.x=t.x,n.y=t.y,n.z=t.z,n.w=t.w,n}function c(t,n){var e=new a(t),r=n&&n.state,o=function(){return(e.next()>>>0)/4294967296};return o.double=function(){do{var t=((e.next()>>>11)+(e.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=e.next,o.quick=o,r&&("object"==typeof r&&s(r,e),o.state=function(){return s(e,{})}),o}o&&o.exports?o.exports=c:e(0)&&e(2)?void 0===(r=function(){return c}.call(n,e,n,o))||(o.exports=r):this.xor128=c}(0,t,e(0))}).call(this,e(1)(t))},function(t,n,e){(function(t){var r;!function(t,o,i){function a(t){var n=this,e="";n.next=function(){var t=n.x^n.x>>>2;return n.x=n.y,n.y=n.z,n.z=n.w,n.w=n.v,(n.d=n.d+362437|0)+(n.v=n.v^n.v<<4^t^t<<1)|0},n.x=0,n.y=0,n.z=0,n.w=0,n.v=0,t===(0|t)?n.x=t:e+=t;for(var r=0;r<e.length+64;r++)n.x^=0|e.charCodeAt(r),r==e.length&&(n.d=n.x<<10^n.x>>>4),n.next()}function s(t,n){return n.x=t.x,n.y=t.y,n.z=t.z,n.w=t.w,n.v=t.v,n.d=t.d,n}function c(t,n){var e=new a(t),r=n&&n.state,o=function(){return(e.next()>>>0)/4294967296};return o.double=function(){do{var t=((e.next()>>>11)+(e.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=e.next,o.quick=o,r&&("object"==typeof r&&s(r,e),o.state=function(){return s(e,{})}),o}o&&o.exports?o.exports=c:e(0)&&e(2)?void 0===(r=function(){return c}.call(n,e,n,o))||(o.exports=r):this.xorwow=c}(0,t,e(0))}).call(this,e(1)(t))},function(t,n,e){(function(t){var r;!function(t,o,i){function a(t){var n=this;n.next=function(){var t,e,r=n.x,o=n.i;return t=r[o],e=(t^=t>>>7)^t<<24,e^=(t=r[o+1&7])^t>>>10,e^=(t=r[o+3&7])^t>>>3,e^=(t=r[o+4&7])^t<<7,t=r[o+7&7],e^=(t^=t<<13)^t<<9,r[o]=e,n.i=o+1&7,e},function(t,n){var e,r=[];if(n===(0|n))r[0]=n;else for(n=""+n,e=0;e<n.length;++e)r[7&e]=r[7&e]<<15^n.charCodeAt(e)+r[e+1&7]<<13;for(;r.length<8;)r.push(0);for(e=0;e<8&&0===r[e];++e);for(8==e?r[7]=-1:r[e],t.x=r,t.i=0,e=256;e>0;--e)t.next()}(n,t)}function s(t,n){return n.x=t.x.slice(),n.i=t.i,n}function c(t,n){null==t&&(t=+new Date);var e=new a(t),r=n&&n.state,o=function(){return(e.next()>>>0)/4294967296};return o.double=function(){do{var t=((e.next()>>>11)+(e.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=e.next,o.quick=o,r&&(r.x&&s(r,e),o.state=function(){return s(e,{})}),o}o&&o.exports?o.exports=c:e(0)&&e(2)?void 0===(r=function(){return c}.call(n,e,n,o))||(o.exports=r):this.xorshift7=c}(0,t,e(0))}).call(this,e(1)(t))},function(t,n,e){(function(t){var r;!function(t,o,i){function a(t){var n=this;n.next=function(){var t,e,r=n.w,o=n.X,i=n.i;return n.w=r=r+1640531527|0,e=o[i+34&127],t=o[i=i+1&127],e^=e<<13,t^=t<<17,e^=e>>>15,t^=t>>>12,e=o[i]=e^t,n.i=i,e+(r^r>>>16)|0},function(t,n){var e,r,o,i,a,s=[],c=128;for(n===(0|n)?(r=n,n=null):(n+="\0",r=0,c=Math.max(c,n.length)),o=0,i=-32;i<c;++i)n&&(r^=n.charCodeAt((i+32)%n.length)),0===i&&(a=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(a=a+1640531527|0,o=0==(e=s[127&i]^=r+a)?o+1:0);for(o>=128&&(s[127&(n&&n.length||0)]=-1),o=127,i=512;i>0;--i)r=s[o+34&127],e=s[o=o+1&127],r^=r<<13,e^=e<<17,r^=r>>>15,e^=e>>>12,s[o]=r^e;t.w=a,t.X=s,t.i=o}(n,t)}function s(t,n){return n.i=t.i,n.w=t.w,n.X=t.X.slice(),n}function c(t,n){null==t&&(t=+new Date);var e=new a(t),r=n&&n.state,o=function(){return(e.next()>>>0)/4294967296};return o.double=function(){do{var t=((e.next()>>>11)+(e.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=e.next,o.quick=o,r&&(r.X&&s(r,e),o.state=function(){return s(e,{})}),o}o&&o.exports?o.exports=c:e(0)&&e(2)?void 0===(r=function(){return c}.call(n,e,n,o))||(o.exports=r):this.xor4096=c}(0,t,e(0))}).call(this,e(1)(t))},function(t,n,e){(function(t){var r;!function(t,o,i){function a(t){var n=this,e="";n.next=function(){var t=n.b,e=n.c,r=n.d,o=n.a;return t=t<<25^t>>>7^e,e=e-r|0,r=r<<24^r>>>8^o,o=o-t|0,n.b=t=t<<20^t>>>12^e,n.c=e=e-r|0,n.d=r<<16^e>>>16^o,n.a=o-t|0},n.a=0,n.b=0,n.c=-1640531527,n.d=1367130551,t===Math.floor(t)?(n.a=t/4294967296|0,n.b=0|t):e+=t;for(var r=0;r<e.length+20;r++)n.b^=0|e.charCodeAt(r),n.next()}function s(t,n){return n.a=t.a,n.b=t.b,n.c=t.c,n.d=t.d,n}function c(t,n){var e=new a(t),r=n&&n.state,o=function(){return(e.next()>>>0)/4294967296};return o.double=function(){do{var t=((e.next()>>>11)+(e.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=e.next,o.quick=o,r&&("object"==typeof r&&s(r,e),o.state=function(){return s(e,{})}),o}o&&o.exports?o.exports=c:e(0)&&e(2)?void 0===(r=function(){return c}.call(n,e,n,o))||(o.exports=r):this.tychei=c}(0,t,e(0))}).call(this,e(1)(t))},function(t,n,e){var r;!function(o,i,a){var s,c=256,u=6,l="random",f=a.pow(c,u),d=a.pow(2,52),h=2*d,m=c-1;function S(t,n,e){var r=[],m=x(function t(n,e){var r,o=[],i=typeof n;if(e&&"object"==i)for(r in n)try{o.push(t(n[r],e-1))}catch(t){}return o.length?o:"string"==i?n:n+"\0"}((n=1==n?{entropy:!0}:n||{}).entropy?[t,v(i)]:null==t?function(){try{var t;return s&&(t=s.randomBytes)?t=t(c):(t=new Uint8Array(c),(o.crypto||o.msCrypto).getRandomValues(t)),v(t)}catch(t){var n=o.navigator,e=n&&n.plugins;return[+new Date,o,e,o.screen,v(i)]}}():t,3),r),S=new T(r),E=function(){for(var t=S.g(u),n=f,e=0;t<d;)t=(t+e)*c,n*=c,e=S.g(1);for(;t>=h;)t/=2,n/=2,e>>>=1;return(t+e)/n};return E.int32=function(){return 0|S.g(4)},E.quick=function(){return S.g(4)/4294967296},E.double=E,x(v(S.S),i),(n.pass||e||function(t,n,e,r){return r&&(r.S&&g(r,S),t.state=function(){return g(S,{})}),e?(a[l]=t,n):t})(E,m,"global"in n?n.global:this==a,n.state)}function T(t){var n,e=t.length,r=this,o=0,i=r.i=r.j=0,a=r.S=[];for(e||(t=[e++]);o<c;)a[o]=o++;for(o=0;o<c;o++)a[o]=a[i=m&i+t[o%e]+(n=a[o])],a[i]=n;(r.g=function(t){for(var n,e=0,o=r.i,i=r.j,a=r.S;t--;)n=a[o=m&o+1],e=e*c+a[m&(a[o]=a[i=m&i+n])+(a[i]=n)];return r.i=o,r.j=i,e})(c)}function g(t,n){return n.i=t.i,n.j=t.j,n.S=t.S.slice(),n}function x(t,n){for(var e,r=t+"",o=0;o<r.length;)n[m&o]=m&(e^=19*n[m&o])+r.charCodeAt(o++);return v(n)}function v(t){return String.fromCharCode.apply(0,t)}if(x(a.random(),i),t.exports){t.exports=S;try{s=e(14)}catch(t){}}else void 0===(r=function(){return S}.call(n,e,n,t))||(t.exports=r)}("undefined"!=typeof self?self:this,[],Math)},function(t,n){}]);